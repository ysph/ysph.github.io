<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>СОЦИОНИЧЕСКИЙ ТЕСТ — 160 вопросов</title>
<style>
:root{
  --bg:#f5f7fa; --card:#fff; --accent:#2563eb; --muted:#6b7280;
}
body{
  font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background:var(--bg); color:#0f172a; margin:0; padding:24px;
}
.container{
  max-width:1100px; margin:0 auto; background:var(--card);
  padding:24px 28px; border-radius:16px;
  box-shadow:0 8px 24px rgba(15,23,42,.08);
}
h1{margin:0 0 8px; font-size:24px; font-weight:600;}
.instructions{font-size:14px; color:var(--muted); margin-bottom:16px;}
.controls{display:flex; gap:10px; flex-wrap:wrap; margin:18px 0;}
button{
  padding:10px 16px; border-radius:8px; border:0;
  background:var(--accent); color:#fff; cursor:pointer;
  font-weight:500; transition:.2s;
}
button:hover{opacity:.9}
.q{padding:10px; border-radius:8px; background:#f9fafb;
  margin-bottom:8px; border:1px solid #eef2f7}
.q h3{margin:0 0 8px; font-size:14px; font-weight:500;}
.radios{display:flex; gap:6px}
.radios label{
  display:inline-flex; align-items:center; justify-content:center;
  width:42px; height:34px; border-radius:6px;
  background:#fff; border:1px solid #e6eef6; cursor:pointer;
}
.radios input{display:none}
.radios input:checked+label{background:var(--accent); color:#fff; border-color:var(--accent)}
#output{margin-top:20px;}
table{width:100%; border-collapse:collapse; margin-top:14px}
th,td{border:1px solid #e6eef7; padding:8px 10px; text-align:left; font-size:13px}
th{background:#f9fafb;}
canvas{max-width:700px; width:100%; height:340px; background:#fff;
  border-radius:8px; border:1px solid #eef2f7; margin-top:12px;}
.legend{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px}
.legend-item{display:flex; align-items:center; gap:6px; font-size:13px}
.color-box{width:14px;height:14px;border-radius:3px}
.bottom-controls{display:flex; gap:10px; margin-top:24px; flex-wrap:wrap;}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<div class="container">
  <h1>СОЦИОНИЧЕСКИЙ ТЕСТ — 160 вопросов</h1>
  <div class="instructions">Оцените утверждения по шкале 1–5. После заполнения нажмите «Посчитать результаты».</div>

  <div class="controls">

  </div>

  <form id="quiz"></form>
  <div id="output"></div>

  <div class="bottom-controls">
    <button id="calc">Посчитать результаты</button>
    <button id="export">Экспорт в PDF</button>
    <button id="fill">Заполнить случайно</button>
    <button id="reset">Сбросить</button>
    <button id="allOne">Все единицы</button>
    <button id="allFive">Все пятёрки</button>
  </div>
</div>

<script>
// ---------- Соционические функции с цветовой характеристикой ----------
const functionNames = {
  Te: 'ЧЛ', // Чёрная логика
  Ti: 'БЛ', // Белая логика
  Fe: 'ЧЭ', //  Чёрная этика
  Fi: 'БЭ', //  Белая этика
  Se: 'ЧС', //  Чёрная сенсорика
  Si: 'БС', // Белая сенсорика
  Ne: 'ЧИ', //  Чёрная интуиция
  Ni: 'БИ' // Белая интуиция
};
const functions = Object.keys(functionNames);

// ---------- QUESTIONS (пример, можно заменить на все 160) ----------
const questions = [
"1. Я всегда внимателен даже к самым мелким логическим деталям.",
"2. Атмосфера страха и наказания сильно демотивирует меня к обучению чему-либо.",
"3. Во время еды я часто концентрируюсь на приятных и вкусных ощущениях.",
"4. Я признаю и уважаю самоценность каждого человека.",
"5. У меня веселый, легкий и ненавязчивый характер, я умею получать радость от жизни и делиться ею с другими.",
"6. Я часто чувствую вину.",
"7. Пусть воля к власти растет и побеждает! Пусть все слабые и уродливые погибнут!",
"8. Я мягок и миролюбив, но при этом могу быть капризным.",
"9. Часто бывает, что я начинаю представлять какие-то страшные события даже в солнечный день.",
"10. Иногда меня преследуют навязчивые картины воображения.",
"11. Мне нравится атмосфера борьбы и сражения.",
"12. Я умею терпеливо объяснять, обосновывать и аргументировать.",
"13. Я часто экспериментирую с уютом и комфортом, чтобы устранить раздражающие элементы.",
"14. Я очень хорошо знаю людей, иногда мне кажется, что я легко читаю их мысли.",
"15. Я часто делаю комплименты людям.",
"16. В отношениях мне не хватает некоторой чувствительности и деликатности.",
"17. Возможно, иногда я могу быть «сладким и приторным» в общении с людьми.",
"18. По сравнению с другими, у меня исключительный талант к терпению, отзывчивости, воспитанию и преданности.",
"19. Лучше других я могу максимизировать результат с минимальными энергозатратами.",
"20. Я чаще грустный, чем счастливый и веселый.",
"21. Я всегда веду себя как сильный и уважаемый человек.",
"22. У меня плохой аппетит, я ем чаще потому, что нужно.",
"23. Мне трудно что-то испытывать по отношению к людям, я довольно равнодушен к ним.",
"24. Фразы «Время — деньги», «Время не ждет» могут быть моим девизом.",
"25. Иногда мое присутствие в группе людей может приводить к взаимной лени, и я не знаю почему.",
"26. Я мог бы быть хорошим предпринимателем — всегда в движении, умею вдохновлять людей, интересуюсь техническими инновациями и лучше других вижу перспективность начинаний.",
"27. У меня много разных хобби и интересов, часто переключающихся одно на другое.",
"28. Моя природа бунтарская, восставшая и склонна к критическому несогласию.",
"29. Мне нравится тщательное исследование и аналитическая работа, связанная с анализом сложных явлений и объектов.",
"30. Я хотел бы работать над унификацией и стандартизацией — в инженерии, электронике, софте, документообороте, праве и т.д.",
"31. Я часто предупреждаю, ругаю и критикую других, сидя с каменным выражением лица.",
"32. Когда я вытягиваю что-то из другого человека, применяя давление, я обычно получаю приятное чувство.",
"33. Я был бы хорошим журналистом, сводником или колумнистом в отделе экстренных новостей.",
"34. Мне очень не нравятся домыслы в высказываниях, я предпочитаю однозначные факты и аргументы.",
"35. Я больше обращаю внимание на тон и интонацию речи, чем на ее содержание.",
"36. Я искренне уважаю людей без статуса, больших достижений и славы, но добрых, безобидных и любящих.",
"37. Довольно часто люди обижаются на то, что я говорю, хотя моя цель не была их обидеть.",
"38. Я люблю сюрпризы.",
"39. Я гибок в отношениях с людьми, уменьшаю или увеличиваю психологическую дистанцию в зависимости от ситуации, особенно если человек имеет вес в обществе или мне выгоден этот контакт.",
"40. Я часто демонстрирую нерешительность и отсутствие мгновенной реакции на быстро меняющиеся события вокруг меня.",
"41. Мне комфортнее, чем другим, в меняющейся или даже хаотичной среде; я легко адаптируюсь.",
"42. Мои эмоции глубокие, драматичные и стойкие.",
"43. Мои мышцы обычно в тонусе даже во время отпуска. Я чувствую напряжение и сдержанность, иногда легкие подергивания.",
"44. Другие скажут, что я трудоголик.",
"45. Я мог бы быть психотерапевтом, актером или диджеем на радио.",
"46. Иногда мне нравится страх других.",
"47. Я люблю тихую музыку и долгие подробные разговоры — это дает мне энергию и вдохновляет.",
"48. Верно, что я не делаю ставку на будущее — это мой образ жизни.",
"49. Я умею льстить человеку, если хочу достичь желаемого.",
"50. Я сильно раздражаюсь из-за беспорядка или когда что-то сделано не так, как я просил.",
"51. У меня есть, или я бы хотел иметь, троих или более детей.",
"52. Я стремлюсь к комфорту и приятным ощущениям и избегаю неприятных чувств.",
"53. Я часто не чувствую эмпатию к героям фильмов — это ведь нереально.",
"54. Для меня важны слова: достойно или нет, выгодно или нет, эффективно или нет.",
"55. Меня удручает всё, что требует сильного психологического напряжения и сильных эмоций.",
"56. Мне требуется много сил, чтобы думать о будущем и делать прогнозы.",
"57. Когда происходит что-то неожиданное или неприятное, я реагирую очень эмоционально и долго не успокаиваюсь.",
"58. У меня всегда были трудности в понимании других людей и их мотивов.",
"59. Я часто забываю, куда положил вещи в доме.",
"60. У меня легко на глаза наворачиваются слезы.",
"61. Я склонен заботиться о близких, даже в мелких делах.",
"62. Способность погружаться в мечты и фантазии помогает мне быть терпеливым и внимательным.",
"63. Я умею готовить еду для себя и мне это нравится.",
"64. Я легко замечаю и отслеживаю любые маленькие изменения в своих ощущениях; здоровье и телесный образ очень важны для меня.",
"65. Власть подчинять и приказывать другим приносит удовольствие, независимо от реальной нужды в этом.",
"66. Во многих случаях мои эмоции становятся очень сильными в одно мгновение — я могу кипеть от них.",
"67. Иногда мои эмоции выходят за пределы и бывают беспощадны.",
"68. Меня отталкивает рутина и повседневная работа.",
"69. Любая идея быстро превращается у меня в действие; мне не нужно времени на эмоциональную настройку.",
"70. Почти всегда, когда кто-то навязывает свои унылые чувства, я хочу уйти от этого человека как можно скорее.",
"71. Я достигну цели даже трудом и усилиями.",
"72. Честность, доброта и сильная трудовая этика — мои ключевые черты.",
"73. У меня гибкие, экономные и плавные движения.",
"74. Я легче других учусь новым танцевальным движениям.",
"75. В детстве я любил систематизировать коллекции.",
"76. У меня всегда были трудности понимать и чувствовать будущее.",
"77. Я всегда замечаю что-то новое или необычное в знакомых предметах вокруг.",
"78. Я сторонник радикальных изменений в мировом порядке.",
"79. Если я хочу, я могу легко выступить против общественного мнения.",
"80. Все мои желания подкреплены сильными и уверенными эмоциями.",
"81. Я внимателен к любым изменениям в теле и обычно замечаю первые признаки болезни.",
"82. Когда я наметил идею, я методично и упорно иду к ней, игнорируя ненужные обстоятельства.",
"83. Мне не нравится обсуждать серьезные темы в несерьезной обстановке.",
"84. У меня талант почти зачаровывать людей и вдохновлять их своим шармом.",
"85. Я охотно помогаю по хозяйству по любому запросу.",
"86. Ключевые слова для меня: удовольствие, сытость, наслаждение, удовлетворение голода или жажды.",
"87. Я хорош в прогнозировании событий.",
"88. Для меня отпуск — не просто безделье; это череда полезных занятий.",
"89. Я очень внимателен к моральной стороне поведения людей и обращаю внимание на непристойные поступки друзей.",
"90. Иногда мне кажется, что я растворяюсь во вселенной, забывая о теле и физических ощущениях.",
"91. Мой недостаток — я беру слишком много задач и не вижу перспективы. Мне нужны люди, которые могли бы меня остудить и помочь в логической организации времени.",
"92. Мне нравится играть с людьми как с пешками в шахматах.",
"93. Я экономен дома, постоянно энергичен и исполнительный в работе.",
"94. В воображении я часто вижу один и тот же объект в разные моменты времени.",
"95. Часто мое воображение течет в глобальные идеи и планы, даже в активную трансформацию мира.",
"96. Иногда я испытываю внезапную отчужденность, всё вокруг становится мертвым и бессмысленным.",
"97. Я могу ждать и выбрать лучший момент, чтобы свергнуть конкурента.",
"98. Я склонен к конфликтам и агрессии, особенно когда мне скучно.",
"99. У меня хорошо организованный научный ум.",
"100. Лучший способ стимулировать людей к качественной работе — штрафовать их и вычитать из зарплаты.",
"101. Мне нравится приводить в порядок неупорядоченную информацию, распределяя по категориям.",
"102. Я предпочел бы путешествие во времени, а не к другим обитаемым планетам.",
"103. Иногда обычные бытовые предметы кажутся мне немного странными и отличными.",
"104. Я часто думаю о своих близких.",
"105. Я хорошо осознаю способности и намерения людей.",
"106. Главное в воспитании детей — давать им как можно больше свободы и не запрещать много вещей.",
"107. Почти всегда я обращаю внимание на просьбы незнакомцев.",
"108. Обычно я строго придерживаюсь запланированной последовательности действий.",
"109. Я часто думаю о будущем.",
"110. Мне нравится смотреть на явление с разных углов и предлагать несколько объяснений.",
"111. Когда я читаю книги, меня больше интересуют человеческие взаимоотношения, чем сюжет.",
"112. Мои движения немного ограничены и напряжены.",
"113. Обычно я не очень организован и могу казаться непрактичным.",
"114. Я объективен и точен в суждениях; мне нравится структура, классификации и концепции.",
"115. Я постоянно вижу вокруг множество позитивных возможностей.",
"116. Работа коммерческого директора подходит мне лучше, чем работа свободного художника.",
"117. Я сдержан в личной жизни, могу быть не совсем дипломатичным и иногда взрываться гневом.",
"118. Довольно часто я веду себя, не думая о последствиях.",
"119. Мои желания и хотелки обычно не заметны мне; мне трудно выйти из состояния созерцательной безразличности.",
"120. Мне неприятно, когда люди чувствуют, что зависят от меня.",
"121. Иногда я ищу страдания и самоотречение.",
"122. У меня есть 'шестое чувство' — иногда я знаю, что произойдет, задолго до события.",
"123. Мне нравится поддразнивать коллег.",
"124. Я охотно анализирую и навожу порядок во всем, с чем соприкасаюсь.",
"125. Лучше случайно убить какую-то инновационную идею, чем позволить путанице заразить умы.",
"126. Картины катастроф и раненых людей пробуждают во мне очень сильные эмоции.",
"127. Мой разум скептически относится ко многим общим или шокирующим идеям, противоречащим здравому смыслу.",
"128. Я могу и люблю говорить о своих чувствах возвышенно и страстно.",
"129. Я бы с удовольствием ехал на велосипеде или в машине на максимальной скорости.",
"130. Я бы никогда не копил деньги; они должны постоянно \"работать\".",
"131. Мне нравится захватывающее чувство риска.",
"132. Возможно, у других много сомнений, но у меня их редко бывает.",
"133. Настоящий момент важен для меня, когда он счастлив и приятен здесь и сейчас, а не отложен в неопределенное будущее.",
"134. Мне нравится испытывать новые опасности — это требует полной мобилизации и расширяет пределы моих навыков.",
"135. У меня всегда много новых оригинальных идей.",
"136. Я часто пользуюсь зеркалом и могу проводить перед ним много времени.",
"137. Мое присутствие всегда положительно влияет на команду.",
"138. Работа HR-менеджера подошла бы мне больше, чем работа в инженерии.",
"139. Я легко запоминаю цвета одежды друзей и семьи за вчера и сегодня.",
"140. Я часто чувствую себя жертвой обстоятельств и беспомощным что-либо изменить.",
"141. Иногда в моей голове одна идея или нововведение сразу опровергает другую.",
"142. Я часто чувствую себя больным и жалуюсь на это.",
"143. Я бы хотел организовать документооборот в крупной корпорации.",
"144. Спор — для меня интересная игра; я с радостью ввязываюсь в такие беседы и могу играть любую сторону.",
"145. В группе людей я играю скрытую, но провокационную роль, расшатывая ситуацию и подталкивая других к работе.",
"146. В детстве мне не нравилось ждать праздника — я хотел подарок раньше и капризничал.",
"147. Любое проявление человеческого неравенства раздражает меня.",
"148. У меня есть некоторый мазохистский аспект: иногда мне нравится действовать самоуничижительно.",
"149. Я лирическая и романтичная натура. Я сентиментален, чувствителен и тонко раним.",
"150. Важны слова: духовность, вина, уязвимость, сострадание, забота, честность, моральность, надежность, скромность, ответственность, последовательность.",
"151. Думаю, мне бы понравилась профессия массажиста в оздоровительном учреждении.",
"152. Я переживаю, если поссорился с близкими или чувствую их пренебрежение.",
"153. На самом деле я сторонник радикальных и глобальных организационных решений; поддержал бы их и на работе, и в обществе.",
"154. Я очень конкретный и реалистичный человек, далёкий от фантазий.",
"155. Обычно я опираюсь на защиту и статус друзей и знакомых, а не на свои напористые качества.",
"156. Я требую от людей строгого соблюдения принятых общественных норм поведения.",
"157. В общем, я стараюсь экономить энергию и работать только над действительно нужными вещами.",
"158. В короткий срок я склонен становиться сторонником новых теорий, предлагающих иную структурную картину явлений.",
"159. Мне нравится жаловаться кому-нибудь на свои неудачи и непригодность.",
"160. Раз в неделю или чаще я так злюсь, что могу пнуть кого-то или что-то."
];

// ---------- Маппинг вопросов к функциям ----------
function mapQuestionToFunctionWeights(t){
  t=t.toLowerCase();
  const w={Te:1,Ti:1,Fe:1,Fi:1,Se:1,Si:1,Ne:1,Ni:1};
  const add=(k,v=1)=>w[k]+=v;
  if(/логик|аналит|структур|системат|категор|наука|объектив|точн|концепт/.test(t)) { add('Ti',3); add('Te',2); }
  if(/власть|подчин|пораж|побежд|свергн|конкурент|приказывать/.test(t)) { add('Te',3); add('Se',2); }
  if(/чувств|эмоц|слез|вина|сострадан|сентимент|забот/.test(t)) { add('Fi',3); add('Fe',2); }
  if(/еда|вкус|сытост|удовольств|комфорт|уют|физическ|наслажден/.test(t)) { add('Si',3); add('Fi',2); }
  if(/энерг|движ|двиг|предприни|инициатив|скорост|риск|экшен/.test(t)) { add('Se',3); add('Te',1); }
  if(/предска|будущ|шестое чувство|интуиция|предвид/.test(t)) { add('Ni',3); add('Ne',2); }
  if(/идей|воображен|фантаз|новых идей|креатив|оригинал/.test(t)) { add('Ne',3); add('Ni',1); }
  if(/тон и интонац|интонац|музык|разговор|внимани к тону|эмпат/.test(t)) { add('Fe',3); add('Fi',1); }
  const arr=functions.map(f=>w[f]);
  const min=Math.min(...arr), max=Math.max(...arr);
  return arr.map(v=>max===min?3:1+Math.round((v-min)/(max-min)*4));
}
const mapping=questions.map(q=>mapQuestionToFunctionWeights(q));

// ---------- Build quiz ----------
const form=document.getElementById('quiz');
questions.forEach((q,i)=>{
  const div=document.createElement('div'); div.className='q';
  div.innerHTML=`<h3>${q}</h3>`;
  const radios=document.createElement('div'); radios.className='radios';
  for(let v=1;v<=5;v++){
    const id=`q${i}v${v}`;
    radios.innerHTML+=`
      <input type="radio" id="${id}" name="q${i}" value="${v}" ${v===3?'checked':''}>
      <label for="${id}">${v}</label>`;
  }
  div.appendChild(radios);
  form.appendChild(div);
});

// ---------- Compute ----------
function compute(){
  const answers=questions.map((_,i)=>{
    const el=document.querySelector(`input[name="q${i}"]:checked`);
    return el?Number(el.value):3;
  });
  const funcScores=functions.map(()=>0);
  questions.forEach((_,i)=>{
    for(let f=0;f<functions.length;f++)
      funcScores[f]+=answers[i]*mapping[i][f];
  });
  const total=funcScores.reduce((a,b)=>a+b,0)||1;
  const perc=funcScores.map(s=>Math.round(s/total*1000)/10);
  return {funcScores, perc};
}

// ---------- Draw animated bar chart ----------
function drawBarChart(labels, values){
  const out=document.getElementById('output');
  const header=document.createElement('h3'); header.textContent='Распределение по функциям';
  out.appendChild(header);

  const canvas=document.createElement('canvas');
  canvas.width=800; canvas.height=340;
  out.appendChild(canvas);
  const ctx=canvas.getContext('2d');

  const colors=['#3b82f6','#f97316','#10b981','#ef4444','#8b5cf6','#14b8a6','#e11d48','#64748b'];
  const pad={l:60,r:30,t:30,b:40};
  const w=canvas.width-pad.l-pad.r, h=canvas.height-pad.t-pad.b;
  const max=Math.max(...values,10);
  const barW=w/labels.length*0.7;
  const step=w/labels.length;
  let progress=0;

  function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    // grid lines
    ctx.strokeStyle='#e5e7eb'; ctx.lineWidth=1; ctx.font='13px Inter';
    for(let i=0;i<=5;i++){
      const y=pad.t+h*(i/5);
      ctx.beginPath(); ctx.moveTo(pad.l,y); ctx.lineTo(canvas.width-pad.r,y); ctx.stroke();
      ctx.fillStyle='#6b7280'; ctx.fillText(Math.round(max*(1-i/5))+'%',5,y+5);
    }
    // bars
    labels.forEach((l,i)=>{
      const val=values[i]*progress;
      const x=pad.l+i*step+step*0.15, y=pad.t+h-h*(val/max);
      ctx.fillStyle='#f3f4f6'; ctx.fillRect(x,pad.t,barW,h);
      ctx.fillStyle=colors[i%colors.length]; ctx.fillRect(x,y,barW,h*(val/max));
      ctx.fillStyle='#0f172a'; ctx.fillText(functionNames[l],x, y-4);
    });
    if(progress<1){ progress+=0.03; requestAnimationFrame(animate); }
  }
  animate();
}

// ---------- Handlers ----------
document.getElementById('calc').addEventListener('click',e=>{
  e.preventDefault();
  const {funcScores, perc}=compute();
  const out=document.getElementById('output'); out.innerHTML='';

  // table
  const table=document.createElement('table');
  table.innerHTML='<thead><tr><th>Функция</th><th>Сумма</th><th>%</th></tr></thead>';
  const tbody=document.createElement('tbody');
  functions.forEach((f,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${functionNames[f]}</td><td>${funcScores[i].toFixed(1)}</td><td>${perc[i]}%</td>`;
    tbody.appendChild(tr);
  });
  table.appendChild(tbody); out.appendChild(table);

  drawBarChart(functions, perc);
});

document.getElementById('fill').addEventListener('click',e=>{
  e.preventDefault();
  questions.forEach((_,i)=>{
    const v=Math.ceil(Math.random()*5);
    const el=document.getElementById(`q${i}v${v}`);
    if(el) el.checked=true;
  });
});

document.getElementById('allOne').addEventListener('click',e=>{
  e.preventDefault();
  questions.forEach((_,i)=>{
    const el=document.getElementById(`q${i}v1`);
    if(el) el.checked=true;
  });
});

document.getElementById('allFive').addEventListener('click',e=>{
  e.preventDefault();
  questions.forEach((_,i)=>{
    const el=document.getElementById(`q${i}v5`);
    if(el) el.checked=true;
  });
});

document.getElementById('reset').addEventListener('click',e=>{
  e.preventDefault();
  questions.forEach((_,i)=>{
    const el=document.getElementById(`q${i}v3`);
    if(el) el.checked=true;
  });
  document.getElementById('output').innerHTML='';
});

// ---------- Export PDF ----------
document.getElementById('export').addEventListener('click',()=>{
  const { jsPDF } = window.jspdf;
  const doc=new jsPDF();
  doc.html(document.getElementById('output'), {x:10,y:10,width:190, windowWidth:800})
     .then(()=>doc.save('results.pdf'));
});
</script>
</body>
</html>
